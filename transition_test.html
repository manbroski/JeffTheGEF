<head>
    <script src="kinetic.js">
    </script>
    <script>
        window.onload = function() {
            var stage = new Kinetic.Stage({
                container: "container",
                width: 578,
                height: 200
            });
            var layer = new Kinetic.Layer();
            var receptor = new barrel_protein(100,250,60,60,"red");
            layer.add(receptor);
            stage.add(layer);
 
            /*
             * wait one second before starting the
             * transition
             */
            setTimeout(function() {
                receptor.shape.transitionTo({
                    alpha: 1,
                    duration: 1,
                });
            }, 1000);
        
		};

function barrel_protein (x, y, width, height, color) {
	
	var	curvature = 20;
	var r = width/2;
	var ligand_radius = 20;
	var alpha_radius = 30;
	var alpha_bs = 12;

	this.shape = new Kinetic.Shape({
		drawFunc: function() {
			var context = this.getContext();
			
			//draw
			context.beginPath();
			context.moveTo(x, y);
			context.arc(x + r, y, r, Math.PI, Math.PI * 4/3,false);
			context.lineTo(x + r/2, y - r/3);
			context.lineTo(x + width - r/2, y - r/3);
			context.arc(x + r, y, r, Math.PI* 5/3, 0, false);
			context.lineTo(x + width, y + height);
			context.arc(x + r, y + height, r, 0, Math.PI * 1/6,false); 
			context.lineTo(x + width - r/2, y + height + r/2);
			context.arc(x + r, y + height, r, Math.PI*1/3,Math.PI, false);
			context.closePath();
			
			this.fillStroke();
		},
		
		fill:color,
		stoke: "black",
		strokeWidth: 1
	});
}
    </script>
</head>
<body onmousedown="return false;">
    <div id="container">
    </div>
</body>
